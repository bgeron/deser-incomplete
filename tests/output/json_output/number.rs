use super::{default_modes, run_json_modes_on_prefixes_and_format_outputs};

#[test]
fn test_i32() {
    insta::assert_ron_snapshot!(
        run_json_modes_on_prefixes_and_format_outputs::<Vec<i32>>(&default_modes(), &"[0, 1, 12345, -54321]"),
        @r###"
    {
      "default behavior": {
        "": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 12345, -5": Ok([
          0,
          1,
          12345,
          -5,
        ]),
        "[0, 1, 12345, -54": Ok([
          0,
          1,
          12345,
          -54,
        ]),
        "[0, 1, 12345, -543": Ok([
          0,
          1,
          12345,
          -543,
        ]),
        "[0, 1, 12345, -5432": Ok([
          0,
          1,
          12345,
          -5432,
        ]),
        "[0, 1, 12345, -54321": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
      "default behavior except no randomized trailer": {
        "": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 12345, -5": Ok([
          0,
          1,
          12345,
          -5,
        ]),
        "[0, 1, 12345, -54": Ok([
          0,
          1,
          12345,
          -54,
        ]),
        "[0, 1, 12345, -543": Ok([
          0,
          1,
          12345,
          -543,
        ]),
        "[0, 1, 12345, -5432": Ok([
          0,
          1,
          12345,
          -5432,
        ]),
        "[0, 1, 12345, -54321": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
      "default behavior, 0 backtracks": {
        "": Ok([]),
        "[": Err("the maximum number of backtracks has been exceeded (see tracing logs for pointers to avoid a high number of backtracks)"),
        "[0, 1, 12345, -54321]": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
      "no fallbacks, 0 backtracks": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[": Err("the maximum number of backtracks has been exceeded (see tracing logs for pointers to avoid a high number of backtracks)"),
        "[0, 1, 12345, -54321]": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
      "no fallbacks, 1 backtracks": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 12345, -5": Ok([
          0,
          1,
          12345,
          -5,
        ]),
        "[0, 1, 12345, -54": Ok([
          0,
          1,
          12345,
          -54,
        ]),
        "[0, 1, 12345, -543": Ok([
          0,
          1,
          12345,
          -543,
        ]),
        "[0, 1, 12345, -5432": Ok([
          0,
          1,
          12345,
          -5432,
        ]),
        "[0, 1, 12345, -54321": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
      "default behavior, 1 backtracks": {
        "": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 12345, -5": Ok([
          0,
          1,
          12345,
          -5,
        ]),
        "[0, 1, 12345, -54": Ok([
          0,
          1,
          12345,
          -54,
        ]),
        "[0, 1, 12345, -543": Ok([
          0,
          1,
          12345,
          -543,
        ]),
        "[0, 1, 12345, -5432": Ok([
          0,
          1,
          12345,
          -5432,
        ]),
        "[0, 1, 12345, -54321": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
      "strict behavior": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[0, 1, 12345, -54321]": Ok([
          0,
          1,
          12345,
          -54321,
        ]),
      },
    }
    "###
    );
}

#[test]
fn test_i32_overflow() {
    insta::assert_ron_snapshot!(
        run_json_modes_on_prefixes_and_format_outputs::<Vec<i32>>(&default_modes(), &"[0, 1, 1234567890]"),
    @r###"
    {
      "default behavior": {
        "": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 123456": Ok([
          0,
          1,
          123456,
        ]),
        "[0, 1, 1234567": Ok([
          0,
          1,
          1234567,
        ]),
        "[0, 1, 12345678": Ok([
          0,
          1,
          12345678,
        ]),
        "[0, 1, 123456789": Ok([
          0,
          1,
          123456789,
        ]),
        "[0, 1, 1234567890": Ok([
          0,
          1,
          1234567890,
        ]),
      },
      "default behavior except no randomized trailer": {
        "": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 123456": Ok([
          0,
          1,
          123456,
        ]),
        "[0, 1, 1234567": Ok([
          0,
          1,
          1234567,
        ]),
        "[0, 1, 12345678": Ok([
          0,
          1,
          12345678,
        ]),
        "[0, 1, 123456789": Ok([
          0,
          1,
          123456789,
        ]),
        "[0, 1, 1234567890": Ok([
          0,
          1,
          1234567890,
        ]),
      },
      "default behavior, 0 backtracks": {
        "": Ok([]),
        "[": Err("the maximum number of backtracks has been exceeded (see tracing logs for pointers to avoid a high number of backtracks)"),
        "[0, 1, 1234567890]": Ok([
          0,
          1,
          1234567890,
        ]),
      },
      "no fallbacks, 0 backtracks": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[": Err("the maximum number of backtracks has been exceeded (see tracing logs for pointers to avoid a high number of backtracks)"),
        "[0, 1, 1234567890]": Ok([
          0,
          1,
          1234567890,
        ]),
      },
      "no fallbacks, 1 backtracks": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 123456": Ok([
          0,
          1,
          123456,
        ]),
        "[0, 1, 1234567": Ok([
          0,
          1,
          1234567,
        ]),
        "[0, 1, 12345678": Ok([
          0,
          1,
          12345678,
        ]),
        "[0, 1, 123456789": Ok([
          0,
          1,
          123456789,
        ]),
        "[0, 1, 1234567890": Ok([
          0,
          1,
          1234567890,
        ]),
      },
      "default behavior, 1 backtracks": {
        "": Ok([]),
        "[0": Ok([
          0,
        ]),
        "[0, 1": Ok([
          0,
          1,
        ]),
        "[0, 1, 1": Ok([
          0,
          1,
          1,
        ]),
        "[0, 1, 12": Ok([
          0,
          1,
          12,
        ]),
        "[0, 1, 123": Ok([
          0,
          1,
          123,
        ]),
        "[0, 1, 1234": Ok([
          0,
          1,
          1234,
        ]),
        "[0, 1, 12345": Ok([
          0,
          1,
          12345,
        ]),
        "[0, 1, 123456": Ok([
          0,
          1,
          123456,
        ]),
        "[0, 1, 1234567": Ok([
          0,
          1,
          1234567,
        ]),
        "[0, 1, 12345678": Ok([
          0,
          1,
          12345678,
        ]),
        "[0, 1, 123456789": Ok([
          0,
          1,
          123456789,
        ]),
        "[0, 1, 1234567890": Ok([
          0,
          1,
          1234567890,
        ]),
      },
      "strict behavior": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[0, 1, 1234567890]": Ok([
          0,
          1,
          1234567890,
        ]),
      },
    }
    "###
    );
}

#[test]
fn test_f32() {
    insta::assert_ron_snapshot!(
        run_json_modes_on_prefixes_and_format_outputs::<Vec<f32>>(
            &default_modes(),
            &"[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42]"
        ),
       @r###"
    {
      "default behavior": {
        "": Ok([]),
        "[0": Ok([
          0.0,
        ]),
        "[0, 1": Ok([
          0.0,
          1.0,
        ]),
        "[0, 1, 1": Ok([
          0.0,
          1.0,
          1.0,
        ]),
        "[0, 1, 12": Ok([
          0.0,
          1.0,
          12.0,
        ]),
        "[0, 1, 123": Ok([
          0.0,
          1.0,
          123.0,
        ]),
        "[0, 1, 1234": Ok([
          0.0,
          1.0,
          1234.0,
        ]),
        "[0, 1, 12345": Ok([
          0.0,
          1.0,
          12345.0,
        ]),
        "[0, 1, 12345, 1": Ok([
          0.0,
          1.0,
          12345.0,
          1.0,
        ]),
        "[0, 1, 12345, 12": Ok([
          0.0,
          1.0,
          12345.0,
          12.0,
        ]),
        "[0, 1, 12345, 123": Ok([
          0.0,
          1.0,
          12345.0,
          123.0,
        ]),
        "[0, 1, 12345, 1234": Ok([
          0.0,
          1.0,
          12345.0,
          1234.0,
        ]),
        "[0, 1, 12345, 12345": Ok([
          0.0,
          1.0,
          12345.0,
          12345.0,
        ]),
        "[0, 1, 12345, 123456": Ok([
          0.0,
          1.0,
          12345.0,
          123456.0,
        ]),
        "[0, 1, 12345, 1234567": Ok([
          0.0,
          1.0,
          12345.0,
          1234567.0,
        ]),
        "[0, 1, 12345, 12345678": Ok([
          0.0,
          1.0,
          12345.0,
          12345678.0,
        ]),
        "[0, 1, 12345, 123456789": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14159,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141592": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141592,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415926": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415925,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -10": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -10.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -100": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -100.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 4": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          4.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
      "default behavior except no randomized trailer": {
        "": Ok([]),
        "[0": Ok([
          0.0,
        ]),
        "[0, 1": Ok([
          0.0,
          1.0,
        ]),
        "[0, 1, 1": Ok([
          0.0,
          1.0,
          1.0,
        ]),
        "[0, 1, 12": Ok([
          0.0,
          1.0,
          12.0,
        ]),
        "[0, 1, 123": Ok([
          0.0,
          1.0,
          123.0,
        ]),
        "[0, 1, 1234": Ok([
          0.0,
          1.0,
          1234.0,
        ]),
        "[0, 1, 12345": Ok([
          0.0,
          1.0,
          12345.0,
        ]),
        "[0, 1, 12345, 1": Ok([
          0.0,
          1.0,
          12345.0,
          1.0,
        ]),
        "[0, 1, 12345, 12": Ok([
          0.0,
          1.0,
          12345.0,
          12.0,
        ]),
        "[0, 1, 12345, 123": Ok([
          0.0,
          1.0,
          12345.0,
          123.0,
        ]),
        "[0, 1, 12345, 1234": Ok([
          0.0,
          1.0,
          12345.0,
          1234.0,
        ]),
        "[0, 1, 12345, 12345": Ok([
          0.0,
          1.0,
          12345.0,
          12345.0,
        ]),
        "[0, 1, 12345, 123456": Ok([
          0.0,
          1.0,
          12345.0,
          123456.0,
        ]),
        "[0, 1, 12345, 1234567": Ok([
          0.0,
          1.0,
          12345.0,
          1234567.0,
        ]),
        "[0, 1, 12345, 12345678": Ok([
          0.0,
          1.0,
          12345.0,
          12345678.0,
        ]),
        "[0, 1, 12345, 123456789": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14159,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141592": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141592,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415926": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415925,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -10": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -10.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -100": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -100.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 4": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          4.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
      "default behavior, 0 backtracks": {
        "": Ok([]),
        "[": Err("the maximum number of backtracks has been exceeded (see tracing logs for pointers to avoid a high number of backtracks)"),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42]": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
      "no fallbacks, 0 backtracks": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[": Err("the maximum number of backtracks has been exceeded (see tracing logs for pointers to avoid a high number of backtracks)"),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42]": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
      "no fallbacks, 1 backtracks": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[": Ok([]),
        "[0": Ok([
          0.0,
        ]),
        "[0, 1": Ok([
          0.0,
          1.0,
        ]),
        "[0, 1, 1": Ok([
          0.0,
          1.0,
          1.0,
        ]),
        "[0, 1, 12": Ok([
          0.0,
          1.0,
          12.0,
        ]),
        "[0, 1, 123": Ok([
          0.0,
          1.0,
          123.0,
        ]),
        "[0, 1, 1234": Ok([
          0.0,
          1.0,
          1234.0,
        ]),
        "[0, 1, 12345": Ok([
          0.0,
          1.0,
          12345.0,
        ]),
        "[0, 1, 12345, 1": Ok([
          0.0,
          1.0,
          12345.0,
          1.0,
        ]),
        "[0, 1, 12345, 12": Ok([
          0.0,
          1.0,
          12345.0,
          12.0,
        ]),
        "[0, 1, 12345, 123": Ok([
          0.0,
          1.0,
          12345.0,
          123.0,
        ]),
        "[0, 1, 12345, 1234": Ok([
          0.0,
          1.0,
          12345.0,
          1234.0,
        ]),
        "[0, 1, 12345, 12345": Ok([
          0.0,
          1.0,
          12345.0,
          12345.0,
        ]),
        "[0, 1, 12345, 123456": Ok([
          0.0,
          1.0,
          12345.0,
          123456.0,
        ]),
        "[0, 1, 12345, 1234567": Ok([
          0.0,
          1.0,
          12345.0,
          1234567.0,
        ]),
        "[0, 1, 12345, 12345678": Ok([
          0.0,
          1.0,
          12345.0,
          12345678.0,
        ]),
        "[0, 1, 12345, 123456789": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14159,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141592": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141592,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415926": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415925,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -10": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -10.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -100": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -100.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 4": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          4.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
      "default behavior, 1 backtracks": {
        "": Ok([]),
        "[0": Ok([
          0.0,
        ]),
        "[0, 1": Ok([
          0.0,
          1.0,
        ]),
        "[0, 1, 1": Ok([
          0.0,
          1.0,
          1.0,
        ]),
        "[0, 1, 12": Ok([
          0.0,
          1.0,
          12.0,
        ]),
        "[0, 1, 123": Ok([
          0.0,
          1.0,
          123.0,
        ]),
        "[0, 1, 1234": Ok([
          0.0,
          1.0,
          1234.0,
        ]),
        "[0, 1, 12345": Ok([
          0.0,
          1.0,
          12345.0,
        ]),
        "[0, 1, 12345, 1": Ok([
          0.0,
          1.0,
          12345.0,
          1.0,
        ]),
        "[0, 1, 12345, 12": Ok([
          0.0,
          1.0,
          12345.0,
          12.0,
        ]),
        "[0, 1, 12345, 123": Ok([
          0.0,
          1.0,
          12345.0,
          123.0,
        ]),
        "[0, 1, 12345, 1234": Ok([
          0.0,
          1.0,
          12345.0,
          1234.0,
        ]),
        "[0, 1, 12345, 12345": Ok([
          0.0,
          1.0,
          12345.0,
          12345.0,
        ]),
        "[0, 1, 12345, 123456": Ok([
          0.0,
          1.0,
          12345.0,
          123456.0,
        ]),
        "[0, 1, 12345, 1234567": Ok([
          0.0,
          1.0,
          12345.0,
          1234567.0,
        ]),
        "[0, 1, 12345, 12345678": Ok([
          0.0,
          1.0,
          12345.0,
          12345678.0,
        ]),
        "[0, 1, 12345, 123456789": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
        ]),
        "[0, 1, 12345, 123456789, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.14159,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.141592": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.141592,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.1415926": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415925,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -10": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -10.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -100": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -100.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.0": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 4": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          4.0,
        ]),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
      "strict behavior": {
        "": Err("could not find a potential backtrack point (do you have #[serde(default)] on your top-level type? are your settings too strict?) (after 0 backtracks)"),
        "[0, 1, 12345, 123456789, 3.14, 3.14159265358979323846264338327950288419716939937510, -1, -1000, -0, 0.000, 42]": Ok([
          0.0,
          1.0,
          12345.0,
          123456790.0,
          3.14,
          3.1415927,
          -1.0,
          -1000.0,
          -0.0,
          0.0,
          42.0,
        ]),
      },
    }
    "###
    );
}
